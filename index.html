<!DOCTYPE html>
<html>
<head>
  <title>Music Recommendation System</title>
</head>
<body>

  <h1>Music Recommendation System</h1>

  <label>Age:</label><br>
  <input id="age" type="number" value="19"><br><br>

  <label>Gender:</label><br>
  <select id="gender">
    <option value="0">Male</option>
    <option value="1">Female</option>
  </select><br><br>

  <label>Location:</label><br>
  <input id="location" type="number" value="8"><br><br>

  <!-- IMPORTANT: type="button" -->
  <button type="button" onclick="getRecommendation()">
    Get Recommendation
  </button>

  <p id="result" style="font-weight: bold; margin-top: 20px;"></p>

  <script>
    async function getRecommendation() {
      document.getElementById("result").innerText = "Loading...";

      let age = Number(document.getElementById("age").value);
      let gender = Number(document.getElementById("gender").value);
      let location = Number(document.getElementById("location").value);

      let response = await fetch(
        "https://music-api-ozqi.onrender.com/predict",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            features: [age, gender, location]
          })
        }
      );

      let data = await response.json();

      if (data.recommended_genre) {
        document.getElementById("result").innerText =
          "Recommended Genre: " + data.recommended_genre;
      } else {
        document.getElementById("result").innerText =
          "Error: " + data.error;
      }
    }
  </script>

</body>
</html>
